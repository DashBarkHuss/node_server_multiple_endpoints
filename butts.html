<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script type="module">
    class User {
      constructor() {}
    }
    User.butt = function (shape) {
      console.log("user.butt");
      fetch('/api/butt', {
        method: 'post',
        
        headers: {
          'Accept': 'application/json'
        },
        body: JSON.stringify({shape: shape})
      }).then(promise => promise.json())
        .then(json => {
          if (json[json.length-1].success){
            console.log(json);
            for (var i=0; i<(json.length-1); i++) {
              console.log(i);
              const owner = json[i].owner;
              const buttDiv = document.querySelector('#returnedButts');
              if (i == 0) buttDiv.innerHTML = "";
              i == (json.length-2)?  buttDiv.innerHTML += owner + ".":buttDiv.innerHTML += owner + ", ";
              
            }
          }
          else
            console.log(`something went wrong: `, json);
        });
    }
    
    window.onload = () => {
            window.User = User;
        }
    
  </script>
</head>

<body>
  <h1>Butt Finder</h1>
  Select shape of butt
  <input type="button" onclick="User.butt('round')" value="round"></input>
  <input type="button" onclick="User.butt('flat')" value="flat"></input>
  <input type="button" onclick="User.butt('square')" value="square"></input>
  <p id='returnedButts'></p>
</body>

</html>